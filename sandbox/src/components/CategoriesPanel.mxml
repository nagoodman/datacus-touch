<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 xmlns:dg="http://www.degrafa.com/2007"
		 creationComplete="init()">  
	
	<fx:Script>
		<![CDATA[
			import flash.display.DisplayObject;
			
			import org.tuio.TouchEvent;
			
			private var offsetX:Number;
			private var offsetY:Number;
			private var draggedObject:DisplayObject;
			
			protected function init():void {			
				this.addEventListener(org.tuio.TouchEvent.TOUCH_DOWN, startDragging);
				this.addEventListener(org.tuio.TouchEvent.TOUCH_UP, stopDragging);
			}
			
			public function startDragging(e:org.tuio.TouchEvent):void {
				trace("startDrag!");
				draggedObject = DisplayObject(e.target);
				offsetX = e.stageX - draggedObject.x;
				offsetY = e.stageY - draggedObject.y;
				this.addEventListener(org.tuio.TouchEvent.TOUCH_MOVE, dragObject);
			}

			public function stopDragging(e:org.tuio.TouchEvent):void {
				trace("stopDragging!");
				this.removeEventListener(org.tuio.TouchEvent.TOUCH_MOVE, dragObject); 
			}			
			
			public function dragObject(e:org.tuio.TouchEvent):void {
				trace("dragging!");
				draggedObject.x = e.stageX - offsetX;
				draggedObject.y = e.stageY = offsetY;
				//e.updateAfterEvent();
			}
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<dg:SolidStroke id="mainStroke" alpha="1" color="#FF0000" caps="round" weight="3"/>
		<dg:SolidFill id="mainFill" alpha="0.5" color="#00FF00"/>	
	</fx:Declarations>
	<s:Panel x="10" y="49" width="750" height="100" textAlign="center" title="Categories">
	</s:Panel>
</s:Group>
